<!DOCTYPE html> <html lang="fa"> <head prefix="og: http://ogp.me/ns#"> <meta charset="UTF-8" /> <meta http-equiv="X-UA-Compatible" content="ie=edge" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <meta name="mobile-web-app-capable" content="yes" /> <meta name="apple-mobile-web-app-capable" content="yes" /> <meta name="application-name" content="Ù…Ø­Ù…Ø¯ Ø²ÛŒÙ†Ù„ÛŒ" /> <meta name="apple-mobile-web-app-status-bar-style" content="#fff" /> <meta name="apple-mobile-web-app-title" content="Ù…Ø­Ù…Ø¯ Ø²ÛŒÙ†Ù„ÛŒ" /> <title> Ø¨Ù‡ Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ±. - Ù…Ø­Ù…Ø¯ Ø²ÛŒÙ†Ù„ÛŒ </title> <link rel="alternate" href="http://localhost:4000/mahour-update/" hreflang="fa" /> <link rel="canonical" href="http://localhost:4000/mahour-update/" /> <meta name="description" content="Ù…Ø§Ù‡ÙˆØ± ÛŒÚ© Ø§ÙØ²ÙˆÙ†Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø³ØªÙˆÙ† ØªØ§Ø±ÛŒØ® Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø­Ø¨ÙˆØ¨ Thunderbird Ø§Ø³Øª." /> <meta name="referrer" content="no-referrer-when-downgrade" /> <meta property="fb:app_id" content="" /> <meta property="og:site_name" content="Ø¨Ù‡ Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ±. | " /> <meta property="og:title" content="Ø¨Ù‡ Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ±. | " /> <meta property="og:type" content="website" /> <meta property="og:url" content="http://localhost:4000/mahour-update/" /> <meta property="og:description" content="Ù…Ø§Ù‡ÙˆØ± ÛŒÚ© Ø§ÙØ²ÙˆÙ†Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø³ØªÙˆÙ† ØªØ§Ø±ÛŒØ® Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø­Ø¨ÙˆØ¨ Thunderbird Ø§Ø³Øª." /> <meta property="og:image" content="http://localhost:4000/assets/img/ogp.png" /> <meta property="og:image:width" content="640" /> <meta property="og:image:height" content="640" /> <meta name="twitter:card" content="summary" /> <meta name="twitter:title" content="Ø¨Ù‡ Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ±. | " /> <meta name="twitter:url" content="http://localhost:4000/mahour-update/" /> <meta name="twitter:site" content="@" /> <meta name="twitter:creator" content="@" /> <meta name="twitter:description" content="Ù…Ø§Ù‡ÙˆØ± ÛŒÚ© Ø§ÙØ²ÙˆÙ†Ù‡ Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆØ¯Ù† Ø³ØªÙˆÙ† ØªØ§Ø±ÛŒØ® Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù…Ø¯ÛŒØ±ÛŒØª Ø§ÛŒÙ…ÛŒÙ„ Ù…Ø­Ø¨ÙˆØ¨ Thunderbird Ø§Ø³Øª." /> <meta name="twitter:image" content="http://localhost:4000/assets/img/ogp.png" /> <link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="Ù…Ø­Ù…Ø¯ Ø²ÛŒÙ†Ù„ÛŒ" /> <link rel="apple-touch-icon" sizes="180x180" href="/assets/favicons/apple-touch-icon.png" /> <link rel="icon" type="image/png" sizes="32x32" href="/assets/favicons/favicon-32x32.png" /> <link rel="icon" type="image/png" sizes="16x16" href="/assets/favicons/favicon-16x16.png" /> <link rel="manifest" href="/assets/favicons/site.webmanifest" /> <link rel="mask-icon" href="/assets/favicons/safari-pinned-tab.svg" color="#5bbad5" /> <meta name="apple-mobile-web-app-title" content="Jekyll Klise" /> <meta name="application-name" content="Jekyll Klise" /> <meta name="msapplication-TileColor" content="#da532c" /> <meta name="theme-color" content="#2c2c2c" /> <link rel="stylesheet" href="/assets/css/style.css" /> </head> <body data-theme="dark" class="notransition"> <script> const body = document.body; const data = body.getAttribute("data-theme"); const initTheme = (state) => { if (state === "dark") { body.setAttribute("data-theme", "dark"); } else if (state === "light") { body.removeAttribute("data-theme"); } else { localStorage.setItem("theme", data); } }; initTheme(localStorage.getItem("theme")); setTimeout(() => body.classList.remove("notransition"), 75); </script> <div class="navbar" role="navigation"> <nav class="menu"> <input type="checkbox" id="menu-trigger" class="menu-trigger" /> <label for="menu-trigger"> <span class="menu-icon"> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <path d="M64,384H448V341.33H64Zm0-106.67H448V234.67H64ZM64,128v42.67H448V128Z" /> </svg> </span> </label> <a id="mode"> <svg class="mode-sunny" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>LIGHT</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> <svg class="mode-moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 512 512" > <title>DARK</title> <line x1="256" y1="48" x2="256" y2="96" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="256" y1="416" x2="256" y2="464" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="108.92" x2="369.14" y2="142.86" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="369.14" x2="108.92" y2="403.08" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="464" y1="256" x2="416" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="96" y1="256" x2="48" y2="256" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="403.08" y1="403.08" x2="369.14" y2="369.14" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <line x1="142.86" y1="142.86" x2="108.92" y2="108.92" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> <circle cx="256" cy="256" r="80" style="stroke-linecap:round;stroke-miterlimit:10;stroke-width:32px" /> </svg> </a> <div class="trigger"> <div class="trigger-container"><a class="menu-link" href="/">Ø®Ø§Ù†Ù‡</a><a class="menu-link" href="/archive/">Ø¨Ø§ÛŒÚ¯Ø§Ù†ÛŒ</a><a class="menu-link" href="/tags/">Ø¨Ø±Ú†Ø³Ø¨â€ŒÙ‡Ø§</a><a class="menu-link" href="/wiki/">ÙˆÛŒÚ©ÛŒ</a><a class="menu-link" href="/about/">Ø¯Ø±Ø¨Ø§Ø±Ù‡</a><a class="menu-link rss" href="/feed.xml"> <svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" viewBox="0 0 512 512" fill="#ED812E" > <title>Ø®ÙˆØ±Ø§Ú©</title> <path d="M108.56,342.78a60.34,60.34,0,1,0,60.56,60.44A60.63,60.63,0,0,0,108.56,342.78Z" /> <path d="M48,186.67v86.55c52,0,101.94,15.39,138.67,52.11s52,86.56,52,138.67h86.66C325.33,312.44,199.67,186.67,48,186.67Z" /> <path d="M48,48v86.56c185.25,0,329.22,144.08,329.22,329.44H464C464,234.66,277.67,48,48,48Z" /> </svg> </a> </div> </div> </nav> </div> <div class="wrapper post"> <main class="page-content" aria-label="Content"> <article itemscope itemtype="https://schema.org/BlogPosting"> <header class="header"> <div class="tags"> <span itemprop="keywords"> <a class="tag" href="/tags/#unix-linux">UNIX/LINUX</a>, <a class="tag" href="/tags/#foss">FOSS</a>, <a class="tag" href="/tags/#Ù¾Ø±ÙˆÚ˜Ù‡-Ù‡Ø§ÛŒ-Ù…Ù†">Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ù†</a> </span> </div> <h1 class="header-title" itemprop="headline">Ø¨Ù‡ Ø±ÙˆØ² Ø±Ø³Ø§Ù†ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ±.</h1> <div class="post-meta"> <time class="header-date" datetime="2020-11-03T08:10:47+03:30" itemprop="datePublished"> 13 Ø¢Ø¨Ø§Ù†ØŒ 1399 </time> <span itemprop="author" itemscope itemtype="https://schema.org/Person"> <span itemprop="name">Ù…Ø­Ù…Ø¯ Ø²ÛŒÙ†Ù„ÛŒ</span> </span> <time hidden class="date-modify" datetime="" itemprop="dateModified"> 13 Ø¢Ø¨Ø§Ù†ØŒ 1399 </time> <span hidden itemprop="publisher" itemtype="Person">Ù…Ø­Ù…Ø¯ Ø²ÛŒÙ†Ù„ÛŒ</span> <span hidden itemprop="image"></span> <span hidden itemprop="mainEntityOfPage"><p>Ø¯Ø± Ø§ÛŒÙ† Ù¾Ø³Øª ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø¨Ù‡ Ø¨Ù‡Ø§Ù†Ù‡ Ø¨Ù‡ Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ <a href="https://addons.thunderbird.net/en-us/thunderbird/addon/mahour-iranian-date/">Ù…Ø§Ù‡ÙˆØ±</a> Ú©Ù…ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ§ÛŒØ±ÙØ§Ú©Ø³ Ùˆ Ú†Ú¯ÙˆÙ†Ú¯ÛŒ Ø³Ø§Ø®Øª ÛŒÚ© Ø§ÙØ²ÙˆÙ†Ù‡ Ø¨Ø±Ø§ÛŒ ÙØ§ÛŒØ±ÙØ§Ú©Ø³ Ø¨Ù†ÙˆÛŒØ³Ù….</p> </span> </div> </header> <div class="page-content" itemprop="articleBody"> <p>Ø¯Ø± Ø§ÛŒÙ† Ù¾Ø³Øª ØªÙ„Ø§Ø´ Ù…ÛŒâ€ŒÚ©Ù†Ù… Ø¨Ù‡ Ø¨Ù‡Ø§Ù†Ù‡ Ø¨Ù‡ Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ <a href="https://addons.thunderbird.net/en-us/thunderbird/addon/mahour-iranian-date/">Ù…Ø§Ù‡ÙˆØ±</a> Ú©Ù…ÛŒ Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ§ÛŒØ±ÙØ§Ú©Ø³ Ùˆ Ú†Ú¯ÙˆÙ†Ú¯ÛŒ Ø³Ø§Ø®Øª ÛŒÚ© Ø§ÙØ²ÙˆÙ†Ù‡ Ø¨Ø±Ø§ÛŒ ÙØ§ÛŒØ±ÙØ§Ú©Ø³ Ø¨Ù†ÙˆÛŒØ³Ù….</p> <h1 id="Ø§ÙØ²ÙˆÙ†Ù‡Ù‡Ø§ÛŒ-ÙØ§ÛŒØ±ÙØ§Ú©Ø³"> <a href="#Ø§ÙØ²ÙˆÙ†Ù‡Ù‡Ø§ÛŒ-ÙØ§ÛŒØ±ÙØ§Ú©Ø³" class="anchor-head"></a> Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ ÙØ§ÛŒØ±ÙØ§Ú©Ø³ </h1> <p>ØªØ§ Ù¾ÛŒØ´ Ø§Ø² Ù†ÙˆØ§Ù…Ø¨Ø± Û²Û°Û±Û· Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø®Øª ÛŒÚ© Ø§ÙØ²ÙˆÙ†Ù‡ ÙØ§ÛŒØ±ÙØ§Ú©Ø³ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´Øª Ø§Ù…Ø§ Ø¯Ø± Ù†Ø³Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ù‡ Ø±ÙˆØ²ØªØ± Ø¨Ø±Ø®ÛŒ Ø§Ø² Ø¢Ù†Ù‡Ø§ Ù…Ø§Ù†Ù†Ø¯ â€«<code class="language-plaintext highlighter-rouge">overlay add-ons</code>â€¬ØŒ â€«<code class="language-plaintext highlighter-rouge">bootstrapped add-ons</code>â€¬ØŒ â€«<code class="language-plaintext highlighter-rouge">Add-on SDK</code>â€¬ Ùˆ â€¦ Ø¯ÛŒÚ¯Ø± Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions">WebExtensions API</a>Ù‡Ø§ Ø³Ø§Ø®ØªÙ‡ Ø´ÙˆÙ†Ø¯. Ø§Ú¯Ø± ÛŒÚ© Ø§ÙØ²ÙˆÙ†Ù‡ <code class="language-plaintext highlighter-rouge">Legacy</code> Ø¯Ø§Ø±ÛŒØ¯ Ø¨Ø±Ø§ÛŒ Ø³Ø§Ø²Ú¯Ø§Ø±ÛŒ Ø¢Ù† Ø¨Ø§ Ù†Ø³Ø®Ù‡ Ù‡Ø§ÛŒ Ø¨Ù‡ Ø±ÙˆØ² ÙØ§ÛŒØ±ÙØ§Ú©Ø³ Ùˆ Ø³Ø§Ø®Øª <code class="language-plaintext highlighter-rouge">WebExtension</code> Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø² <a href="https://extensionworkshop.com/documentation/develop/porting-a-legacy-firefox-extension/">Ø§ÛŒÙ† Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù…ÙˆØ²ÛŒÙ„Ø§</a> Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.</p> <h2 id="Ø³Ø§Ø®ØªØ§Ø±-webextensionÙ‡Ø§"> <a href="#Ø³Ø§Ø®ØªØ§Ø±-webextensionÙ‡Ø§" class="anchor-head"></a> Ø³Ø§Ø®ØªØ§Ø± <code class="language-plaintext highlighter-rouge">WebExtension</code>Ù‡Ø§ </h2> <p>Ù‡Ø± <code class="language-plaintext highlighter-rouge">WebExtension</code> ÛŒÚ© ÙØ§ÛŒÙ„ <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json"><code class="language-plaintext highlighter-rouge">manifest.json</code></a> Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ø³Ø§Ø®ØªØ§Ø±ØŒ Ù…Ù†Ø§Ø¨Ø¹ Ùˆ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¢Ù† Ø±Ø§ Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø¹Ú©Ø³ Ø²ÛŒØ± Ø³Ø§Ø®ØªØ§Ø± Ú©Ù„ÛŒ ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">manifest.jason</code> Ø±Ø§ Ø¯Ø± ÛŒÚ© <code class="language-plaintext highlighter-rouge">WebExtension</code> Ù†Ø´Ø§Ù† Ù…ÛŒ Ø¯Ù‡Ø¯.</p> <div style="text-align: center;"> <img src="webextension-anatomy.png" style="max-width: 80%; margin: 10px;" alt="Ø³Ø§Ø®ØªØ§Ø± webextensionÙ‡Ø§" /> </div> <p>Ù†Ù…ÙˆÙ†Ù‡ ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">manifest.json</code> Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ±:</p> <div class="code-block"> <figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"manifest_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mahour"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Adds a new Iranian(Persian/Jalali/Khorshidi) date column to ThunderBird."</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.1.2"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"homepage_url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://github.com/mhdzli/mahour"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"author"</span><span class="p">:</span><span class="w"> </span><span class="s2">"M.Zeinali"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"applications"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"gecko"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"mahour@zmim.ir"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"strict_min_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"68.0a1"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"[experiment_apis](experiment_apis)"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"MahourDate"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api/schema.json"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"parent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"addon_parent"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="s2">"MahourDate"</span><span class="p">]],</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api/experiments.js"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"background"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"scripts"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"background/background.js"</span><span class="p">]</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"browser_action"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"default_title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ù…Ø§Ù‡ÙˆØ±"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default_popup"</span><span class="p">:</span><span class="w"> </span><span class="s2">"popup/popup.html"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"default_icon"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"48"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets/icons/icon48.png"</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"options_ui"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"page"</span><span class="p">:</span><span class="w"> </span><span class="s2">"options/options.html"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"open_in_tab"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"icons"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"32"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets/icons/icon32.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"48"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets/icons/icon48.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"64"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets/icons/icon64.png"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"128"</span><span class="p">:</span><span class="w"> </span><span class="s2">"assets/icons/icon128.png"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="nl">"permissions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"storage"</span><span class="p">]</span><span class="w">
</span><span class="p">}</span></code></pre></figure> </div> <p>Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø¯Ø±Ø¨Ø±Ø¯Ø§Ø±Ù†Ø¯Ù‡ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø§Ø³Øª:</p> <ul> <li>Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø§Ø³Ø§Ø³ÛŒ Ú©Ù‡ Ø¨Ø§ÛŒØ³Øª Ø­ØªÙ…Ø§ ØªØ¹Ø±ÛŒÙ Ø´ÙˆÙ†Ø¯: <ul> <li>ÙˆØ±Ú˜Ù† Ù…Ø§Ù†ÛŒÙØ³Øª (<a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/manifest.json/manifest_version"><code class="language-plaintext highlighter-rouge">manifest_version</code></a>)</li> <li>Ù†Ø§Ù… Ø§ÙØ²ÙˆÙ†Ù‡ (<a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/manifest.json/name"><code class="language-plaintext highlighter-rouge">name</code></a>)</li> <li>ÙˆØ±Ú˜Ù† Ø§ÙØ²ÙˆÙ†Ù‡ (<a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/manifest.json/version"><code class="language-plaintext highlighter-rouge">version</code></a>)</li> </ul> </li> <li>Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ÛŒ: <ul> <li>ØªÙˆØ¶ÛŒØ­Ø§Øª Ø¨Ø±Ù†Ø§Ù…Ù‡ (<a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/manifest.json/description"><code class="language-plaintext highlighter-rouge">description</code></a>)</li> <li>Ø¢ÛŒÚ©ÙˆÙ†â€ŒÙ‡Ø§ (<a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/manifest.json/icons"><code class="language-plaintext highlighter-rouge">icons</code></a>)</li> <li>ÙˆØ¨Ú¯Ø§Ù‡ ÛŒØ§ Ù…Ø®Ø²Ù† Ø§ÙØ²ÙˆÙ†Ù‡ (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/homepage_url"><code class="language-plaintext highlighter-rouge">homepage_url</code></a>)</li> <li>Ø³Ø§Ø²Ù†Ø¯Ù‡ (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/author"><code class="language-plaintext highlighter-rouge">author</code></a>)</li> </ul> </li> <li>ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙˆÛŒÚ˜Ù‡ Ù…Ø±ÙˆØ±Ú¯Ø± (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/browser_specific_settings"><code class="language-plaintext highlighter-rouge">browser_specific_settings</code></a> ÛŒØ§ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ <code class="language-plaintext highlighter-rouge">applications</code>). ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø± Ø¨Ø±Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ <a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/WebExtensions_and_the_Add-on_ID#When_do_you_need_an_add-on_ID">Ú†Ù†Ø§Ù†Ú†Ù‡ Ù†ÛŒØ§Ø² Ø¨Ø§Ø´Ø¯</a> Ø¯Ø± Ø§ÛŒÙ† Ú©Ù„ÛŒØ¯ Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯: <ul> <li>Ø­Ø¯Ø§Ù‚Ù„ ÙˆØ±Ú˜Ù† Ù…ÙˆØªÙˆØ± Ø³Ø§Ø®Øª Ù…Ø­ØªÙˆØ§ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø± (<code class="language-plaintext highlighter-rouge">gecko</code>: content rendering engine)</li> <li>Ø´Ù†Ø§Ø³Ù‡ Ø§ÙØ²ÙˆÙ†Ù‡ Ø¨Ø±Ø§ÛŒ Ù…ÙˆØªÙˆØ± ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ (<code class="language-plaintext highlighter-rouge">gecko.id</code>)</li> </ul> </li> <li>Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡ (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Anatomy_of_a_WebExtension#Background_scripts"><code class="language-plaintext highlighter-rouge">Background scripts</code></a>): Ø§ÛŒÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø¯Ø± Ù‚Ø§Ù„Ø¨ ÛŒÚ© ØµÙØ­Ù‡ ÙˆÛŒÚ˜Ù‡ Ø¨Ù‡ Ù†Ø§Ù… <code class="language-plaintext highlighter-rouge">background page</code> Ø¯Ø± Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</li> <li>Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø®Øª Ù…Ø­ØªÙˆØ§ (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/content_scripts"><code class="language-plaintext highlighter-rouge">Content scripts</code></a>) Ú©Ù‡ Ú©Ø§Ø± Ø§ØµÙ„ÛŒ Ø±Ø§ Ø¨Ø± Ø¹Ù‡Ø¯Ù‡ Ø¯Ø§Ø±Ù†Ø¯ Ùˆ Ø®ÙˆØ±Ø§Ú© Ø¨Ø®Ø´â€ŒÙ‡Ø§ÛŒ Ú¯ÙˆÙ†Ø§Ú¯ÙˆÙ† Ø§ÙØ²ÙˆÙ†Ù‡ Ø±Ø§ ØªÙˆÙ„ÛŒØ¯ Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯. Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ± Ø¨Ù‡ Ø¬Ø§ÛŒ Ø§ÛŒÙ† Ú©Ù„ÛŒØ¯ Ø§Ø² <a href="https://firefox-source-docs.mozilla.org/toolkit/components/extensions/webextensions/basics.html#webextensions-experiments"><code class="language-plaintext highlighter-rouge">experiment_apis</code></a> Ø¨Ù‡Ø±Ù‡ Ø¨Ø±Ø¯Ù‡ Ø§Ø³Øª. Ø§Ø³Ú©Ø±ÛŒÙ¾Øª ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ Ø¯Ø±ÙˆÙ† <code class="language-plaintext highlighter-rouge">API</code> Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</li> <li>Ø±Ø§Ø¨Ø· Ø¨Ø±Ù†Ø§Ù…Ù‡â€ŒÙ†ÙˆÛŒØ³ÛŒ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ Ù†Ø±Ù…â€ŒØ§ÙØ²Ø§Ø± (<a href="https://firefox-source-docs.mozilla.org/toolkit/components/extensions/webextensions/basics.html?highlight=experiment_apis#webextensions-experiments"><code class="language-plaintext highlighter-rouge">experiment_apis</code></a>): Ø¨Ø§ Ø§ÛŒÙ† Ú©Ù„ÛŒØ¯ Ù…ÛŒâ€ŒØªÙˆØ§Ù† ÛŒÚ© Ø±Ø§Ø¨Ø· Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†ÙˆÛŒØ³ÛŒ ØªØ§Ø²Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± Ø§ÙØ²ÙˆÙ†Ù‡ Ø³Ø§Ø®Øª.</li> <li>ØµÙØ­Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´ ÙØ±Ø¶ Ú©Ù‡ Ù…Ø§Ù†Ù†Ø¯ ÛŒÚ© ØµÙØ­Ù‡ ÙˆØ¨ Ù…Ø¹Ù…ÙˆÙ„ÛŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø§Ø² ÙØ§ÛŒÙ„Ù‡Ø§ÛŒ <code class="language-plaintext highlighter-rouge">css</code> Ùˆ <code class="language-plaintext highlighter-rouge">js</code> Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†Ù†Ø¯: <ul> <li>Ù†ÙˆØ§Ø± Ú©Ù†Ø§Ø±ÛŒ (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/sidebar_action"><code class="language-plaintext highlighter-rouge">Sidebars</code></a>)</li> <li>Ù¾Ù†Ø¬Ø±Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø§Ø²Ø´Ùˆ (<code class="language-plaintext highlighter-rouge">popups</code>) ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¢Ù† Ø¯Ø± Ú©Ù„ÛŒØ¯ <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/page_action"><code class="language-plaintext highlighter-rouge">browser_action || page_action</code></a> ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</li> <li>Ø³Ø§Ù…Ø§Ù†â€ŒØ¯Ù‡ÛŒ (<code class="language-plaintext highlighter-rouge">options</code>): ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ù…Ø±Ø¨ÙˆØ· Ø¨Ù‡ Ø¢Ù† Ø¯Ø± Ú©Ù„ÛŒØ¯ <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/options_ui"><code class="language-plaintext highlighter-rouge">options_ui</code></a> ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒØ´ÙˆØ¯. Ø§ÛŒÙ† Ú©Ù„ÛŒØ¯ Ø¯Ø± ØµÙØ­Ù‡ <code class="language-plaintext highlighter-rouge">Add-ons Manager</code> Ú¯Ø²ÛŒÙ†Ù‡ <code class="language-plaintext highlighter-rouge">Preferences</code> Ø±Ø§ Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ù†Ù…Ø§ÛŒØ§Ù† Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ø¨Ø§ Ú©Ù„ÛŒÚ© Ú©Ø±Ø¯Ù† Ø±ÙˆÛŒ Ø¢Ù†ØŒ ØµÙØ­Ù‡ Ø³Ø§Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ø¯Ø± Ø§ÛŒÙ† Ø¨Ø®Ø´ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø´Ø¯Ù‡ Ùˆ Ø§Ù…Ú©Ø§Ù† ØªØºÛŒÛŒØ± ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ø±Ø§ ÙØ±Ø§Ù‡Ù… Ù…ÛŒâ€ŒÚ©Ù†Ø¯. (Ø³Øª Ú©Ø±Ø¯Ù† ÙˆÛŒÚ˜Ú¯ÛŒ <code class="language-plaintext highlighter-rouge">open_in_tab</code> ØµÙØ­Ù‡ Ø¬Ø¯ÛŒØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø¨Ø§Ø² Ø®ÙˆØ§Ù‡Ø¯ Ú©Ø±Ø¯.)</li> </ul> </li> <li>ØµÙØ­Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/user_interface/Extension_pages"><code class="language-plaintext highlighter-rouge">Extension pages</code></a>): Ù‡Ø± Ø§ÙØ²ÙˆÙ†Ù‡ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¬Ø¯Ø§ Ø§Ø² ØµÙØ­Ù‡â€ŒÙ‡Ø§ÛŒ Ù¾ÛŒØ´ ÙØ±Ø¶ØŒ Ø¯Ø±Ø¨Ø±Ø¯Ø§Ø±Ù†Ø¯Ù‡ ØµÙØ­Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡ Ø®ÙˆØ¯Ø´ Ù†ÛŒØ² Ø¨Ø§Ø´Ø¯ Ú©Ù‡ Ø§ÛŒÙ†Ø¬Ø§ ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</li> <li>Ù…Ù†Ø§Ø¨Ø¹ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/web_accessible_resources"><code class="language-plaintext highlighter-rouge">Web accessible resources</code></a>): Ú†Ù†Ø§Ù†Ú†Ù‡ Ø¨Ø®ÙˆØ§Ù‡ÛŒÙ… Ø§Ø² ÙØ§ÛŒÙ„â€ŒÙ‡Ø§ÛŒ â€«<code class="language-plaintext highlighter-rouge">HTML</code>â€¬ØŒ â€«<code class="language-plaintext highlighter-rouge">CSS</code>â€¬ØŒ â€«<code class="language-plaintext highlighter-rouge">JavaScript</code>â€¬ Ùˆ â€¦ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ… Ø¢Ù†Ù‡Ø§ Ø±Ø§ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…. (Ù†Ù…ÙˆÙ†Ù‡: Ú†Ù†Ø§Ù†Ú†Ù‡ Ø§ÙØ²ÙˆÙ†Ù‡ Ù†ÛŒØ§Ø² Ø¯Ø§Ø±Ø¯ Ú©Ù‡ Ø¹Ú©Ø³â€ŒÙ‡Ø§ÛŒÛŒ Ø±Ø§ Ø¯Ø± ØµÙØ­Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ¨ Ù†Ù…Ø§ÛŒØ´ Ø¯Ù‡Ø¯ØŒ Ø¢Ù†Ù‡Ø§ Ø±Ø§ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù…Ø³ÛŒØ±Ø¯Ù‡ÛŒ Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ… ØªØ§ Ø¨Ù‡ Ø¢Ù†Ù‡Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´ÛŒÙ….)</li> <li>Ù…Ø¬ÙˆØ²Ù‡Ø§ (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions"><code class="language-plaintext highlighter-rouge">permissions</code></a>): Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ù…ÙˆØ±Ø¯ Ù†ÛŒØ§Ø² Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¨Ø§ Ø§ÛŒÙ† Ú©Ù„ÛŒØ¯ Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯. Ø¨Ø±Ø§ÛŒ Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ø§Ø®ØªÛŒØ§Ø±ÛŒ Ú©Ù‡ Ù†Ø¯Ø§Ø´ØªÙ† Ø¢Ù†Ù‡Ø§ Ø¬Ù„ÙˆÛŒ Ø§Ø¬Ø±Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø±Ø§ Ù†Ù…ÛŒâ€ŒÚ¯ÛŒØ±Ø¯ Ø§Ø² Ú©Ù„ÛŒØ¯ <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/optional_permissions"><code class="language-plaintext highlighter-rouge">optional_permissions</code></a> Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</li> </ul> <h3 id="Ø±Ø§Ø¨Ø·-Ø¨Ø±Ù†Ø§Ù…Ù‡-Ù†ÙˆÛŒØ³ÛŒ-Ø§ÙØ²ÙˆÙ†Ù‡Ù‡Ø§"> <a href="#Ø±Ø§Ø¨Ø·-Ø¨Ø±Ù†Ø§Ù…Ù‡-Ù†ÙˆÛŒØ³ÛŒ-Ø§ÙØ²ÙˆÙ†Ù‡Ù‡Ø§" class="anchor-head"></a> Ø±Ø§Ø¨Ø· Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†ÙˆÛŒØ³ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÙ‡Ø§ </h3> <p>Ø¨Ø±Ø§ÛŒ Ø¯Ø±Ú© Ø¨Ù‡ØªØ± <code class="language-plaintext highlighter-rouge">API</code>Ù‡Ø§ÛŒ Ù…ÙˆØ²ÛŒÙ„Ø§ Ùˆ Ú†Ú¯ÙˆÙ†Ú¯ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø¢Ù†Ù‡Ø§ <a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions">Ø§ÛŒÙ† Ø±Ø§Ù‡Ù†Ù…Ø§</a> Ø±Ø§ Ø¨Ø®ÙˆØ§Ù†ÛŒØ¯.</p> <p>Ø¯Ø± Ø²ÛŒØ± Ù†Ù…ÙˆÙ†Ù‡ ÛŒÚ© <code class="language-plaintext highlighter-rouge">API</code> ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡ Ø¯Ø± ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">manifest.json</code> Ø±Ø§ Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯.</p> <div class="code-block"> <figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span><span class="w">
  </span><span class="nl">"manifest_version"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Extension containing an experimental API"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"experiment_apis"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"apiname"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="nl">"schema"</span><span class="p">:</span><span class="w"> </span><span class="s2">"schema.json"</span><span class="p">,</span><span class="w">
      </span><span class="nl">"parent"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"addon_parent"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="s2">"myapi"</span><span class="p">]],</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"implementation.js"</span><span class="w">
      </span><span class="p">},</span><span class="w">

      </span><span class="nl">"child"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"scopes"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"addon_child"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"paths"</span><span class="p">:</span><span class="w"> </span><span class="p">[[</span><span class="s2">"myapi"</span><span class="p">]],</span><span class="w">
        </span><span class="nl">"script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"child-implementation.js"</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span></code></pre></figure> </div> <p>Ø¯Ø± Ù‡Ø± <code class="language-plaintext highlighter-rouge">API</code> ÛŒÚ© ÛŒØ§ Ú†Ù†Ø¯ ÙØ¶Ø§ÛŒ Ù†Ø§Ù… ØªØ¹Ø±ÛŒÙ Ù…ÛŒâ€ŒØ´ÙˆØ¯ØŒ Ú©Ù‡ Ø§Ø´ÛŒØ§ Ø¢Ù† Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù† Ø¯Ø± Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ú©Ø±Ø¯. Ø¨Ø±Ø§ÛŒ Ù‡Ø± <code class="language-plaintext highlighter-rouge">API</code> Ø¨Ø§ÛŒØ¯ ÛŒÚ© <code class="language-plaintext highlighter-rouge">schema</code> ØªØ¹Ø±ÛŒÙ Ø´ÙˆØ¯ Ú©Ù‡ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ <code class="language-plaintext highlighter-rouge">API</code> Ø±Ø§ Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. Ú©Ù„ÛŒØ¯ <code class="language-plaintext highlighter-rouge">schema</code> Ø¯Ø± ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">manifest.json</code> Ø¯Ø±ÙˆÙ† Ù…Ø³ÛŒØ± Ø§ØµÙ„ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ ÛŒÚ© Ù…Ø³ÛŒØ± Ù†Ø³Ø¨ÛŒ Ø¨Ø±Ø§ÛŒ ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">schema</code> Ù…Ø´Ø®Øµ Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p> <p>ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ Ù¾Ø±Ø¯Ø§Ø²Ø´ Ø³Ø±Ù¾Ø±Ø³Øª (<code class="language-plaintext highlighter-rouge">parent process</code>) Ùˆ Ù¾Ø±Ø¯Ø§Ø²Ø´Ù‡Ø§ÛŒ ÙØ±Ø²Ù†Ø¯ (<code class="language-plaintext highlighter-rouge">child processes</code>) Ø¨Ø§ Ú©Ù„ÛŒØ¯Ù‡Ø§ÛŒ <code class="language-plaintext highlighter-rouge">parent</code> Ùˆ <code class="language-plaintext highlighter-rouge">child</code> Ø¯Ø± <code class="language-plaintext highlighter-rouge">script </code>Ù…Ø³ÛŒØ±Ø¯Ù‡ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯.</p> <p>Ø¯Ø± Ø­Ø§Ù„ Ø­Ø§Ø¶Ø± ØªÙ†Ù‡Ø§ Ú¯Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø¬Ø§Ø² Ú©Ù„ÛŒØ¯ <code class="language-plaintext highlighter-rouge">scops</code> Ø¨Ø±Ø§ÛŒ Ù…Ø´Ø®Øµ Ú©Ø±Ø¯Ù† Ù…Ø­Ø¯ÙˆØ¯Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ù‡Ø± ÙØ¶Ø§ÛŒ Ù†Ø§Ù… <code class="language-plaintext highlighter-rouge">addon-child</code> Ùˆ <code class="language-plaintext highlighter-rouge">addon-parent</code> Ù‡Ø³ØªÙ†Ø¯.</p> <p>ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">schema</code> Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ±:</p> <div class="code-block"> <figure class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nl">"namespace"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MahourDate"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"functions"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"addWindowListener"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"function"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Adds a listener 3pane windows"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"async"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hich"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"string"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"hich"</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">},</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"changeSettings"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"function"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Handle Prefrences"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"async"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
        </span><span class="nl">"parameters"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
          </span><span class="p">{</span><span class="w">
            </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"newSettings"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"object"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="nl">"longMonth"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="w"> </span><span class="p">},</span><span class="w">
              </span><span class="nl">"showTime"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="w"> </span><span class="p">},</span><span class="w">
              </span><span class="nl">"weekDay"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="w"> </span><span class="p">},</span><span class="w">
              </span><span class="nl">"englishNumbers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"boolean"</span><span class="w"> </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
          </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span></code></pre></figure> </div> <p>Ø¯Ø± Ø§ÛŒÙ† ÙØ§ÛŒÙ„ Ø¨Ø±Ø§ÛŒ ÙØ¶Ø§ÛŒ Ù†Ø§Ù… <code class="language-plaintext highlighter-rouge">MahourDate</code> Ø¯Ùˆ ØªØ§Ø¨Ø¹ <code class="language-plaintext highlighter-rouge">addWindowListener</code> Ùˆ <code class="language-plaintext highlighter-rouge">changeSettings</code> ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡ Ø§Ø³Øª. ØªØ§Ø¨Ø¹ Ù†Ø®Ø³Øª Ø¯Ø± Ø²Ù…Ø§Ù† Ø´Ø±ÙˆØ¹ Ø¨Ø±Ù†Ø§Ù…Ù‡ ÛŒÚ© <code class="language-plaintext highlighter-rouge">windowListener</code> Ø¨Ø±Ø§ÛŒ Ú©Ù†ØªØ±Ù„ Ù†Ù…Ø§ÛŒØ´ Ø³ØªÙˆÙ† <code class="language-plaintext highlighter-rouge">ØªØ§Ø±ÛŒØ®</code> Ø¨Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø§Ø¶Ø§ÙÙ‡ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ØªØ§Ø¨Ø¹ Ø¯ÙˆÙ… Ø¨Ø§ Ø¹ÙˆØ¶ Ú©Ø±Ø¯Ù† ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø³ØªÙˆÙ† <code class="language-plaintext highlighter-rouge">ØªØ§Ø±ÛŒØ®</code> Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ Ùˆ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</p> <blockquote> <p>ØªÙˆØ¬Ù‡: ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ø§ÛŒÙ† ØªÙˆØ§Ø¨Ø¹ Ø¯Ø± <code class="language-plaintext highlighter-rouge">background script</code> Ø¨Ø§ÛŒØ¯ Ø¨Ø§ ÛŒÚ© Ù…ØªØºÛŒØ± Ù‡Ù…Ø±Ø§Ù‡ Ø¨Ø§Ø´Ø¯. Ø¨Ù†Ø§Ø¨Ø±Ø§ÛŒÙ† Ù‡Ø± Ú†Ù†Ø¯ <code class="language-plaintext highlighter-rouge">addWindowListener</code> Ù†ÛŒØ§Ø²ÛŒ Ø¨Ù‡ ÙˆØ±ÙˆØ¯ÛŒ Ù†Ø¯Ø§Ø±Ø¯ØŒ Ø¨Ø±Ø§ÛŒ Ø¢Ù† ÛŒÚ© Ù…ØªØºÛŒØ± Ø¨Ù‡ Ù†Ø§Ù… <code class="language-plaintext highlighter-rouge">hich</code> (Ù‡ÛŒÚ†ğŸ˜‚) ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡ Ø§Ø³Øª.</p> </blockquote> <p>Ø§ÛŒÙ† ØªÙˆØ§Ø¨Ø¹ Ø¯Ø±ÙˆÙ† Ø§Ø³Ú©Ø±ÛŒÙ¾Øª <code class="language-plaintext highlighter-rouge">api/experiments.js</code> ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ØŒ Ú©Ù‡ Ø¯Ø± ÙˆÛŒÚ˜Ú¯ÛŒ <code class="language-plaintext highlighter-rouge">parent</code> Ø±Ø§Ø¨Ø· Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†ÙˆÛŒØ³ÛŒ <code class="language-plaintext highlighter-rouge">MahourDate</code> Ø¯Ø± ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">manifest.json</code> Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø³ÛŒØ±Ø¯Ù‡ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.</p> <p>ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">experiment.js</code>:</p> <div class="code-block"> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// This Source Code Form is subject to the terms of the</span>
<span class="c1">// GNU General Public License, version 3.0.</span>

<span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>

<span class="kd">var</span> <span class="p">{</span> <span class="nx">Services</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">ChromeUtils</span><span class="p">.</span><span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">resource://gre/modules/Services.jsm</span><span class="dl">"</span><span class="p">);</span>
<span class="kd">var</span> <span class="p">{</span> <span class="nx">ExtensionSupport</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">ChromeUtils</span><span class="p">.</span><span class="k">import</span><span class="p">(</span>
  <span class="dl">"</span><span class="s2">resource:///modules/ExtensionSupport.jsm</span><span class="dl">"</span>
<span class="p">);</span>
<span class="kd">var</span> <span class="p">{</span> <span class="nx">ExtensionParent</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">ChromeUtils</span><span class="p">.</span><span class="k">import</span><span class="p">(</span>
  <span class="dl">"</span><span class="s2">resource://gre/modules/ExtensionParent.jsm</span><span class="dl">"</span>
<span class="p">);</span>

<span class="kd">const</span> <span class="nx">EXTENSION_NAME</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">mahour@zmim.ir</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">extension</span> <span class="o">=</span> <span class="nx">ExtensionParent</span><span class="p">.</span><span class="nx">GlobalManager</span><span class="p">.</span><span class="nx">getExtension</span><span class="p">(</span><span class="nx">EXTENSION_NAME</span><span class="p">);</span>

<span class="c1">//customizeable options</span>
<span class="kd">var</span> <span class="nx">monthStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">long</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">timeStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">2-digit</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">weekDayStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">numbersStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">arabext</span><span class="dl">"</span><span class="p">;</span>

<span class="c1">// Implements the functions defined in the experiments section of schema.json.</span>
<span class="kd">var</span> <span class="nx">MahourDate</span> <span class="o">=</span> <span class="kd">class</span> <span class="kd">extends</span> <span class="nx">ExtensionCommon</span><span class="p">.</span><span class="nx">ExtensionAPI</span> <span class="p">{</span>
  <span class="nx">onStartup</span><span class="p">()</span> <span class="p">{}</span>

  <span class="nx">onShutdown</span><span class="p">(</span><span class="nx">isAppShutdown</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isAppShutdown</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="c1">// Looks like we got uninstalled. Maybe a new version will be installed now.</span>
    <span class="c1">// Due to new versions not taking effect (https://bugzilla.mozilla.org/show_bug.cgi?id=1634348)</span>
    <span class="c1">// we invalidate the startup cache. That's the same effect as starting with -purgecaches</span>
    <span class="c1">// (or deleting the startupCache directory from the profile).</span>
    <span class="nx">Services</span><span class="p">.</span><span class="nx">obs</span><span class="p">.</span><span class="nx">notifyObservers</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="dl">"</span><span class="s2">startupcache-invalidate</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">getAPI</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">context</span><span class="p">.</span><span class="nx">callOnClose</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">MahourDate</span><span class="p">:</span> <span class="p">{</span>
        <span class="nx">addWindowListener</span><span class="p">(</span><span class="nx">hich</span><span class="p">)</span> <span class="p">{</span>
          <span class="c1">// Adds a listener to detect new windows.</span>
          <span class="nx">ExtensionSupport</span><span class="p">.</span><span class="nx">registerWindowListener</span><span class="p">(</span><span class="nx">EXTENSION_NAME</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">chromeURLs</span><span class="p">:</span> <span class="p">[</span>
              <span class="dl">"</span><span class="s2">chrome://messenger/content/messenger.xul</span><span class="dl">"</span><span class="p">,</span>
              <span class="dl">"</span><span class="s2">chrome://messenger/content/messenger.xhtml</span><span class="dl">"</span><span class="p">,</span>
            <span class="p">],</span>
            <span class="na">onLoadWindow</span><span class="p">:</span> <span class="nx">paint</span><span class="p">,</span>
            <span class="na">onUnloadWindow</span><span class="p">:</span> <span class="nx">unpaint</span><span class="p">,</span>
          <span class="p">});</span>
        <span class="p">},</span>
        <span class="nx">changeSettings</span><span class="p">(</span><span class="nx">newSettings</span><span class="p">)</span> <span class="p">{</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">newSettings</span><span class="p">.</span><span class="nx">longMonth</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">monthStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">long</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">monthStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">2-digit</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">newSettings</span><span class="p">.</span><span class="nx">showTime</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">timeStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">2-digit</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">timeStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">newSettings</span><span class="p">.</span><span class="nx">weekDay</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">weekDayStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">long</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">weekDayStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">if</span> <span class="p">(</span><span class="nx">newSettings</span><span class="p">.</span><span class="nx">englishNumbers</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">numbersStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">latn</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="nx">numbersStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">arabext</span><span class="dl">"</span><span class="p">;</span>
          <span class="p">}</span>
          <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">win</span> <span class="k">of</span> <span class="nx">Services</span><span class="p">.</span><span class="nx">wm</span><span class="p">.</span><span class="nx">getEnumerator</span><span class="p">(</span><span class="dl">"</span><span class="s2">mail:3pane</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
            <span class="nx">win</span><span class="p">.</span><span class="nx">MahourDate</span><span class="p">.</span><span class="nx">MahourDateHeaderView</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
            <span class="nx">win</span><span class="p">.</span><span class="nx">MahourDate</span><span class="p">.</span><span class="nx">MahourDateHeaderView</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">win</span><span class="p">);</span>
          <span class="p">}</span>
        <span class="p">},</span>
      <span class="p">},</span>
    <span class="p">};</span>
  <span class="p">}</span>

  <span class="nx">close</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">ExtensionSupport</span><span class="p">.</span><span class="nx">unregisterWindowListener</span><span class="p">(</span><span class="nx">EXTENSION_NAME</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">win</span> <span class="k">of</span> <span class="nx">Services</span><span class="p">.</span><span class="nx">wm</span><span class="p">.</span><span class="nx">getEnumerator</span><span class="p">(</span><span class="dl">"</span><span class="s2">mail:3pane</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
      <span class="nx">unpaint</span><span class="p">(</span><span class="nx">win</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kd">function</span> <span class="nx">paint</span><span class="p">(</span><span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">win</span><span class="p">.</span><span class="nx">MahourDate</span> <span class="o">=</span> <span class="p">{};</span>
  <span class="nx">Services</span><span class="p">.</span><span class="nx">scriptloader</span><span class="p">.</span><span class="nx">loadSubScript</span><span class="p">(</span>
    <span class="nx">extension</span><span class="p">.</span><span class="nx">getURL</span><span class="p">(</span><span class="dl">"</span><span class="s2">content/customcol.js</span><span class="dl">"</span><span class="p">),</span>
    <span class="nx">win</span><span class="p">.</span><span class="nx">MahourDate</span>
  <span class="p">);</span>
  <span class="nx">win</span><span class="p">.</span><span class="nx">MahourDate</span><span class="p">.</span><span class="nx">MahourDateHeaderView</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">win</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">unpaint</span><span class="p">(</span><span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">win</span><span class="p">.</span><span class="nx">MahourDate</span><span class="p">.</span><span class="nx">MahourDateHeaderView</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
  <span class="k">delete</span> <span class="nx">win</span><span class="p">.</span><span class="nx">MahourDate</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure> </div> <p>Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ†Ú©Ù‡ Ø§Ù…Ú©Ø§Ù† ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ ØªÙˆØ§Ø¨Ø¹ <code class="language-plaintext highlighter-rouge">addWindowListener</code> Ùˆ <code class="language-plaintext highlighter-rouge">changeSettings</code> ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ø¢Ù†Ù‡Ø§ Ø±Ø§ Ø¨Ø§ Ø§Ù„Ú¯ÙˆÛŒ Ù…Ø´Ø®Øµ Ø´Ø¯Ù‡ Ø¯Ø± <a href="https://firefox-source-docs.mozilla.org/toolkit/components/extensions/webextensions/functions.html">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ Ù…ÙˆØ²ÛŒÙ„Ø§</a> Ùˆ Ø¯Ø±ÙˆÙ† <code class="language-plaintext highlighter-rouge">getAPI(context)</code> ØªØ¹Ø±ÛŒÙ Ú©Ø±Ø¯Ù‡â€ŒØ§ÛŒÙ….</p> <p>ØªØ§Ø¨Ø¹ <code class="language-plaintext highlighter-rouge">addWindowListener</code> Ø¨Ø§ eventÙ‡Ø§ÛŒ <code class="language-plaintext highlighter-rouge">onLoadWindow</code> Ùˆ <code class="language-plaintext highlighter-rouge">onUnloadWindow</code> Ø¨Ù‡ ØªØ±ØªÛŒØ¨ ØªÙˆØ§Ø¨Ø¹ <code class="language-plaintext highlighter-rouge">paint</code> Ùˆ <code class="language-plaintext highlighter-rouge">unpaint</code> Ø±Ø§ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯. ØªØ§Ø¨Ø¹ <code class="language-plaintext highlighter-rouge">paint</code> Ø¨Ø§ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª <code class="language-plaintext highlighter-rouge">content/customcol.js</code> Ù…Ø­ØªÙˆØ§ÛŒ Ø³ØªÙˆÙ† Ø±Ø§ ØªÙˆÙ„ÛŒØ¯ Ú©Ø±Ø¯Ù‡ Ùˆ Ø¢Ù† Ø±Ø§ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯. ØªØ§Ø¨Ø¹ <code class="language-plaintext highlighter-rouge">unpaint</code> Ù†Ù…Ø§ÛŒØ´ Ø³ØªÙˆÙ† Ø±Ø§ Ù…ØªÙˆÙ‚Ù Ùˆ Ù…Ø­ØªÙˆØ§ÛŒ Ø¢Ù† Ø±Ø§ Ù¾Ø§Ú© Ù…ÛŒâ€ŒÚ©Ù†Ø¯.</p> <p>Ù…Ù‚Ø¯Ø§Ø± Ù¾ÛŒØ´ ÙØ±Ø¶ Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ù‚Ø§Ø¨Ù„ ØªÙ†Ø¸ÛŒÙ… Ø¨Ø±Ù†Ø§Ù…Ù‡ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯. Ø¯Ø± ØµÙˆØ±Øª ØªØºÛŒÛŒØ± Ø¢Ù†Ù‡Ø§ Ø¯Ø± ØµÙØ­Ù‡ Ø³Ø§Ù…Ø§Ù†Ø¯Ù‡ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡ ØªØ§Ø¨Ø¹ <code class="language-plaintext highlighter-rouge">changeSetting</code> Ø¨Ø§ ÙˆØ§Ø³Ø·Ù‡ <code class="language-plaintext highlighter-rouge">background.js</code> ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ø´Ø¯Ù‡ Ùˆ Ø³ØªÙˆÙ† ØªØ§Ø±ÛŒØ® Ø±Ø§ Ø¯ÙˆØ¨Ø§Ø±Ù‡ Ù…ÛŒâ€ŒØ³Ø§Ø²Ø¯ Ùˆ Ù†Ù…Ø§ÛŒØ´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯.</p> <p>ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">content/customcol.js</code>:</p> <div class="code-block"> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="c1">// This Source Code Form is subject to the terms of the</span>
<span class="c1">// GNU General Public License, version 3.0.</span>
<span class="kd">var</span> <span class="p">{</span> <span class="nx">AppConstants</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">ChromeUtils</span><span class="p">.</span><span class="k">import</span><span class="p">(</span>
  <span class="dl">"</span><span class="s2">resource://gre/modules/AppConstants.jsm</span><span class="dl">"</span>
<span class="p">);</span>
<span class="kd">var</span> <span class="p">{</span> <span class="nx">Services</span> <span class="p">}</span> <span class="o">=</span> <span class="nx">ChromeUtils</span><span class="p">.</span><span class="k">import</span><span class="p">(</span><span class="dl">"</span><span class="s2">resource://gre/modules/Services.jsm</span><span class="dl">"</span><span class="p">);</span>

<span class="kd">const</span> <span class="nx">jalaliDateColumnHandler</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="p">(</span><span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">win</span> <span class="o">=</span> <span class="nx">win</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">getCellText</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">date</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getJalaliDate</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">win</span><span class="p">.</span><span class="nx">gDBView</span><span class="p">.</span><span class="nx">getMsgHdrAt</span><span class="p">(</span><span class="nx">row</span><span class="p">)));</span>
    <span class="kd">var</span> <span class="nx">currentDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>

    <span class="c1">//fixed options</span>
    <span class="kd">var</span> <span class="nx">yearStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">2-digit</span><span class="dl">"</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">dayStyle</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">2-digit</span><span class="dl">"</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">locale</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">fa-IR-u-nu-</span><span class="dl">"</span> <span class="o">+</span> <span class="nx">numbersStyle</span> <span class="o">+</span> <span class="dl">"</span><span class="s2">-ca-persian</span><span class="dl">"</span><span class="p">;</span>

    <span class="kd">var</span> <span class="nx">year</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">(</span><span class="nx">locale</span><span class="p">,</span> <span class="p">{</span> <span class="na">year</span><span class="p">:</span> <span class="nx">yearStyle</span> <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">month</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">(</span><span class="nx">locale</span><span class="p">,</span> <span class="p">{</span> <span class="na">month</span><span class="p">:</span> <span class="nx">monthStyle</span> <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">day</span> <span class="o">=</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">(</span><span class="nx">locale</span><span class="p">,</span> <span class="p">{</span> <span class="na">day</span><span class="p">:</span> <span class="nx">dayStyle</span> <span class="p">});</span>
    <span class="kd">var</span> <span class="nx">weekDay</span> <span class="o">=</span>
      <span class="nx">weekDayStyle</span> <span class="o">!=</span> <span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span>
        <span class="p">?</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">(</span><span class="nx">locale</span><span class="p">,</span> <span class="p">{</span> <span class="na">weekday</span><span class="p">:</span> <span class="nx">weekDayStyle</span> <span class="p">})</span>
        <span class="p">:</span> <span class="dl">""</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">time</span> <span class="o">=</span>
      <span class="nx">timeStyle</span> <span class="o">!=</span> <span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span>
        <span class="p">?</span> <span class="nx">date</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">(</span><span class="nx">locale</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">hour</span><span class="p">:</span> <span class="nx">timeStyle</span><span class="p">,</span>
            <span class="na">minute</span><span class="p">:</span> <span class="nx">timeStyle</span><span class="p">,</span>
            <span class="na">hour12</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
          <span class="p">})</span> <span class="o">+</span> <span class="dl">"</span><span class="s2"> ØŒ</span><span class="dl">"</span>
        <span class="p">:</span> <span class="dl">""</span><span class="p">;</span>

    <span class="c1">//fix for bug that doesn't prepend zero to farsei</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">time</span><span class="p">.</span><span class="nx">length</span> <span class="o">!=</span> <span class="mi">7</span> <span class="o">&amp;&amp;</span> <span class="nx">timeStyle</span> <span class="o">!=</span> <span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">var</span> <span class="nx">zero</span> <span class="o">=</span> <span class="nx">numbersStyle</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">arabext</span><span class="dl">"</span> <span class="p">?</span> <span class="dl">"</span><span class="s2">Û°</span><span class="dl">"</span> <span class="p">:</span> <span class="dl">"</span><span class="s2">0</span><span class="dl">"</span><span class="p">;</span>
      <span class="nx">time</span> <span class="o">=</span> <span class="nx">zero</span> <span class="o">+</span> <span class="nx">time</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">isCurrentYear</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">currentDate</span><span class="p">.</span><span class="nx">toLocaleString</span><span class="p">(</span><span class="nx">locale</span><span class="p">,</span> <span class="p">{</span> <span class="na">year</span><span class="p">:</span> <span class="nx">yearStyle</span> <span class="p">})</span> <span class="o">==</span> <span class="nx">year</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">isCurrentYear</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">isCurrentYear</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">isCurrentDay</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">toDateString</span><span class="p">()</span> <span class="o">===</span> <span class="nx">currentDate</span><span class="p">.</span><span class="nx">toDateString</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">isCurrentDay</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">isCurrentDay</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="kd">var</span> <span class="nx">isYesterday</span><span class="p">;</span>
    <span class="kd">var</span> <span class="nx">yesterdayDate</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">();</span>
    <span class="nx">yesterdayDate</span><span class="p">.</span><span class="nx">setDate</span><span class="p">(</span><span class="nx">currentDate</span><span class="p">.</span><span class="nx">getDate</span><span class="p">()</span> <span class="o">-</span> <span class="mi">1</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">date</span><span class="p">.</span><span class="nx">toDateString</span><span class="p">()</span> <span class="o">===</span> <span class="nx">yesterdayDate</span><span class="p">.</span><span class="nx">toDateString</span><span class="p">())</span> <span class="p">{</span>
      <span class="nx">isYesterday</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">isYesterday</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="kd">var</span> <span class="nx">placehodler</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">monthStyle</span> <span class="o">===</span> <span class="dl">"</span><span class="s2">long</span><span class="dl">"</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">placeholder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">TT </span><span class="se">\</span><span class="s2">u202BWD DD MM YY</span><span class="se">\</span><span class="s2">u202C</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">placeholder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">TT YY/MM/DD WD</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="c1">//remove year if it's current year</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isCurrentYear</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">placeholder</span> <span class="o">=</span> <span class="nx">placeholder</span><span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="sr">/YY./</span><span class="p">,</span> <span class="dl">""</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="c1">//only show time if it's current day or yesterday</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">isCurrentDay</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">placeholder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">TT Ø§Ù…Ø±ÙˆØ²</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="nx">isYesterday</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">placeholder</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">TT Ø¯ÛŒØ±ÙˆØ²</span><span class="dl">"</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="nx">dateString</span> <span class="o">=</span> <span class="nx">placeholder</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">YY</span><span class="dl">"</span><span class="p">,</span> <span class="nx">year</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">MM</span><span class="dl">"</span><span class="p">,</span> <span class="nx">month</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">DD</span><span class="dl">"</span><span class="p">,</span> <span class="nx">day</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">WD</span><span class="dl">"</span><span class="p">,</span> <span class="nx">weekDay</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">replace</span><span class="p">(</span><span class="dl">"</span><span class="s2">TT</span><span class="dl">"</span><span class="p">,</span> <span class="nx">time</span><span class="p">);</span>

    <span class="k">return</span> <span class="nx">dateString</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">getSortStringForRow</span><span class="p">(</span><span class="nx">hdr</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="nx">getJalaliDate</span><span class="p">(</span><span class="nx">hdr</span><span class="p">);</span>
  <span class="p">},</span>
  <span class="nx">isString</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">true</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">getCellProperties</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{},</span>
  <span class="nx">getRowProperties</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">{},</span>
  <span class="nx">getImageSrc</span><span class="p">(</span><span class="nx">row</span><span class="p">,</span> <span class="nx">col</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="kc">null</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">getSortLongForRow</span><span class="p">(</span><span class="nx">hdr</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="nx">getJalaliDate</span><span class="p">(</span><span class="nx">aHeader</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">aHeader</span><span class="p">.</span><span class="nx">date</span> <span class="o">/</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">const</span> <span class="nx">columnOverlay</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="p">(</span><span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">win</span> <span class="o">=</span> <span class="nx">win</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">addColumns</span><span class="p">(</span><span class="nx">win</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">destroy</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">destroyColumns</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="nx">observe</span><span class="p">(</span><span class="nx">aMsgFolder</span><span class="p">,</span> <span class="nx">aTopic</span><span class="p">,</span> <span class="nx">aData</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="nx">jalaliDateColumnHandler</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">win</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">win</span><span class="p">.</span><span class="nx">gDBView</span><span class="p">.</span><span class="nx">addColumnHandler</span><span class="p">(</span>
        <span class="dl">"</span><span class="s2">jalaliDateColumn</span><span class="dl">"</span><span class="p">,</span>
        <span class="nx">jalaliDateColumnHandler</span>
      <span class="p">);</span>
    <span class="p">}</span> <span class="k">catch</span> <span class="p">(</span><span class="nx">ex</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">ex</span><span class="p">);</span>
      <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Cannot add column handler</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">addColumn</span><span class="p">(</span><span class="nx">win</span><span class="p">,</span> <span class="nx">columnId</span><span class="p">,</span> <span class="nx">columnLabel</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">columnId</span><span class="p">))</span> <span class="k">return</span><span class="p">;</span>

    <span class="kd">const</span> <span class="nx">treeCol</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">createXULElement</span><span class="p">(</span><span class="dl">"</span><span class="s2">treecol</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">treeCol</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">,</span> <span class="nx">columnId</span><span class="p">);</span>
    <span class="nx">treeCol</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">persist</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">hidden ordinal sortDirection width</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">treeCol</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">flex</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">2</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">treeCol</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">closemenu</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">none</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">treeCol</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">label</span><span class="dl">"</span><span class="p">,</span> <span class="nx">columnLabel</span><span class="p">);</span>
    <span class="nx">treeCol</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">tooltiptext</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ØªØ§Ø±ÛŒØ® Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ</span><span class="dl">"</span><span class="p">);</span>

    <span class="kd">const</span> <span class="nx">threadCols</span> <span class="o">=</span> <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="dl">"</span><span class="s2">threadCols</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">threadCols</span><span class="p">.</span><span class="nx">appendChild</span><span class="p">(</span><span class="nx">treeCol</span><span class="p">);</span>

    <span class="c1">// Restore persisted attributes.</span>
    <span class="kd">let</span> <span class="nx">attributes</span> <span class="o">=</span> <span class="nx">Services</span><span class="p">.</span><span class="nx">xulStore</span><span class="p">.</span><span class="nx">getAttributeEnumerator</span><span class="p">(</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">URL</span><span class="p">,</span>
      <span class="nx">columnId</span>
    <span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kd">let</span> <span class="nx">attribute</span> <span class="k">of</span> <span class="nx">attributes</span><span class="p">)</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">value</span> <span class="o">=</span> <span class="nx">Services</span><span class="p">.</span><span class="nx">xulStore</span><span class="p">.</span><span class="nx">getValue</span><span class="p">(</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">URL</span><span class="p">,</span>
        <span class="nx">columnId</span><span class="p">,</span>
        <span class="nx">attribute</span>
      <span class="p">);</span>
      <span class="c1">// See Thunderbird bug 1607575 and bug 1612055.</span>
      <span class="k">if</span> <span class="p">(</span>
        <span class="nx">attribute</span> <span class="o">!=</span> <span class="dl">"</span><span class="s2">ordinal</span><span class="dl">"</span> <span class="o">||</span>
        <span class="nb">parseInt</span><span class="p">(</span><span class="nx">AppConstants</span><span class="p">.</span><span class="nx">MOZ_APP_VERSION</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">74</span>
      <span class="p">)</span> <span class="p">{</span>
        <span class="nx">treeCol</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="nx">attribute</span><span class="p">,</span> <span class="nx">value</span><span class="p">);</span>
      <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">treeCol</span><span class="p">.</span><span class="nx">ordinal</span> <span class="o">=</span> <span class="nx">value</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>

    <span class="nx">Services</span><span class="p">.</span><span class="nx">obs</span><span class="p">.</span><span class="nx">addObserver</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="dl">"</span><span class="s2">MsgCreateDBView</span><span class="dl">"</span><span class="p">,</span> <span class="kc">false</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">addColumns</span><span class="p">(</span><span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">addColumn</span><span class="p">(</span><span class="nx">win</span><span class="p">,</span> <span class="dl">"</span><span class="s2">jalaliDateColumn</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">ØªØ§Ø±ÛŒØ®</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">},</span>

  <span class="nx">destroyColumn</span><span class="p">(</span><span class="nx">columnId</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">const</span> <span class="nx">treeCol</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">columnId</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">treeCol</span><span class="p">)</span> <span class="k">return</span><span class="p">;</span>
    <span class="nx">treeCol</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
  <span class="p">},</span>

  <span class="nx">destroyColumns</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">destroyColumn</span><span class="p">(</span><span class="dl">"</span><span class="s2">jalaliDateColumn</span><span class="dl">"</span><span class="p">);</span>
    <span class="nx">Services</span><span class="p">.</span><span class="nx">obs</span><span class="p">.</span><span class="nx">removeObserver</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="dl">"</span><span class="s2">MsgCreateDBView</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">},</span>
<span class="p">};</span>

<span class="kd">var</span> <span class="nx">MahourDateHeaderView</span> <span class="o">=</span> <span class="p">{</span>
  <span class="nx">init</span><span class="p">(</span><span class="nx">win</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">win</span> <span class="o">=</span> <span class="nx">win</span><span class="p">;</span>
    <span class="nx">columnOverlay</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">win</span><span class="p">);</span>

    <span class="c1">// Usually the column handler is added when the window loads.</span>
    <span class="c1">// In our setup it's added later and we may miss the first notification.</span>
    <span class="c1">// So we fire one ourserves.</span>
    <span class="k">if</span> <span class="p">(</span>
      <span class="nx">win</span><span class="p">.</span><span class="nx">gDBView</span> <span class="o">&amp;&amp;</span>
      <span class="nx">win</span><span class="p">.</span><span class="nb">document</span><span class="p">.</span><span class="nx">documentElement</span><span class="p">.</span><span class="nx">getAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">windowtype</span><span class="dl">"</span><span class="p">)</span> <span class="o">==</span> <span class="dl">"</span><span class="s2">mail:3pane</span><span class="dl">"</span>
    <span class="p">)</span> <span class="p">{</span>
      <span class="nx">Services</span><span class="p">.</span><span class="nx">obs</span><span class="p">.</span><span class="nx">notifyObservers</span><span class="p">(</span><span class="kc">null</span><span class="p">,</span> <span class="dl">"</span><span class="s2">MsgCreateDBView</span><span class="dl">"</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">},</span>

  <span class="nx">destroy</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">columnOverlay</span><span class="p">.</span><span class="nx">destroy</span><span class="p">();</span>
  <span class="p">},</span>
<span class="p">};</span></code></pre></figure> </div> <p>Ù…Ø­ØªÙˆØ§ÛŒ Ø§ØµÙ„ÛŒ Ø³ØªÙˆÙ† Ø§ÛŒÙ†Ø¬Ø§ Ø³Ø§Ø®ØªÙ‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ùˆ Ø³ØªÙˆÙ† Ø¬Ø¯ÛŒØ¯ Ø§ÛŒØ¬Ø§Ø¯ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p> <h3 id="Ø§Ø³Ú©Ø±ÛŒÙ¾Øª-Ù¾Ø³-Ø²Ù…ÛŒÙ†Ù‡"> <a href="#Ø§Ø³Ú©Ø±ÛŒÙ¾Øª-Ù¾Ø³-Ø²Ù…ÛŒÙ†Ù‡" class="anchor-head"></a> Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡ </h3> <p>Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡ Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† ØµÙØ­Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆÛŒÚ˜Ù‡ Ù…Ø´Ø®ØµÙ‡ <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window"><code class="language-plaintext highlighter-rouge">window</code></a> Ø±Ø§ Ø¨Ø§ ÙˆÛŒÚ˜Ú¯ÛŒ <a href="https://developer.mozilla.org/en-US/docs/Glossary/DOM"><code class="language-plaintext highlighter-rouge">Document Object Model</code></a> Ø¯Ø§Ø±Ù†Ø¯.</p> <p>ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ ØµÙØ­Ù‡ Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡:</p> <p>ØµÙØ­Ù‡ Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡ Ø²Ù…Ø§Ù†ÛŒ Ú©Ù‡ Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø¬ÙˆØ²Ù‡Ø§ÛŒ Ù„Ø§Ø²Ù… Ø±Ø§ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ØŒ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø¨Ù‡ <code class="language-plaintext highlighter-rouge">WebExtension API</code>Ù‡Ø§ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯. Ù‡Ù…Ú†Ù†ÛŒÙ† Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ù…ÛŒØ²Ø¨Ø§Ù† (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/manifest.json/permissions"><code class="language-plaintext highlighter-rouge">host permissions</code></a>) Ø§Ù…Ú©Ø§Ù† ÙØ±Ø³ØªØ§Ø¯Ù† Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ <code class="language-plaintext highlighter-rouge">XHR</code> Ø±Ø§ Ø¯Ø§Ø±Ø¯. Ø¨Ø±Ø§ÛŒ Ø¢Ú¯Ø§Ù‡ÛŒ Ø¨ÛŒØ´ØªØ± Ø¯Ø± Ø§ÛŒÙ† Ø²Ù…ÛŒÙ†Ù‡ Ú©Ù„ÛŒØ¯ ÙˆØ§Ú˜Ù‡ <code class="language-plaintext highlighter-rouge">Cross-origin access</code> Ø±Ø§ Ø¬Ø³ØªØ¬Ùˆ Ú©Ù†ÛŒØ¯.</p> <p>Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡ Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ù‡ ØµÙØ­Ù‡â€ŒÙ‡Ø§ÛŒ ÙˆØ¨ Ù†Ø¯Ø§Ø±Ø¯ØŒ Ø§Ù…Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ø¯ Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ ØªÙˆÙ„ÛŒØ¯ Ù…Ø­ØªÙˆØ§ (<a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_scripts"><code class="language-plaintext highlighter-rouge">content scripts</code></a>) Ø±Ø§ Ø¯Ø± Ø¢Ù†Ù‡Ø§ Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ú©Ù†Ø¯ Ùˆ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² <a href="https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Content_scripts#Communicating_with_background_scripts"><code class="language-plaintext highlighter-rouge">message-passing API</code></a> Ø¨Ø§ Ø¢Ù†Ù‡Ø§ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø±Ù‚Ø±Ø§Ø± Ú©Ù†Ø¯. Ø§Ø² Ø§ÛŒÙ† Ø´ÛŒÙˆÙ‡ Ø¯Ø± Ø§ÙØ²ÙˆÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³Øª.</p> <blockquote> <p>Ù†Ú©ØªÙ‡: Ø§Ø³Ú©Ø±ÛŒÙ¾Øªâ€ŒÙ‡Ø§ÛŒ Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡ Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Ú©Ù†Ø´â€ŒÙ‡Ø§ÛŒ Ù†Ø§Ø¨Ø¬Ø§ Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ÛŒÛŒ Ù†ÛŒØ² Ø¯Ø§Ø±Ù†Ø¯. Ù†Ø¯Ø§Ø´ØªÙ† ØªÙˆØ§Ù† ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ <code class="language-plaintext highlighter-rouge">eval()</code> Ù†Ù…ÙˆÙ†â€ŒØ§ÛŒ Ø§Ø² Ø§ÛŒÙ† Ù…Ø­Ø¯ÙˆØ¯ÛŒØªâ€ŒÙ‡Ø§ Ø§Ø³Øª. Ø¨Ø±Ø§ÛŒ Ø¢Ú¯Ø§Ù‡ÛŒ Ø¨ÛŒØ´ØªØ± <a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions/Content_Security_Policy"><code class="language-plaintext highlighter-rouge">Content Security Policy</code></a> Ø±Ø§ Ø¨Ø®ÙˆØ§Ù†ÛŒØ¯. Ù‡Ù…Ú†Ù†ÛŒÙ† Ø§Ù…Ú©Ø§Ù† ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ <code class="language-plaintext highlighter-rouge">alert()</code>ØŒ <code class="language-plaintext highlighter-rouge">confirm()</code>ØŒ ÛŒØ§ <code class="language-plaintext highlighter-rouge">prompt()</code> Ù†ÛŒØ² Ø¯Ø± Ø§ÛŒÙ† ØµÙØ­Ù‡ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p> </blockquote> <p>Ú©Ø¯ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù¾Ø³ Ø²Ù…ÛŒÙ†Ù‡ Ù…Ø§Ù‡ÙˆØ±:</p> <div class="code-block"> <figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="dl">"</span><span class="s2">use strict</span><span class="dl">"</span><span class="p">;</span>

<span class="cm">/*
Default settings. Initialize storage to these values.
*/</span>
<span class="kd">var</span> <span class="nx">datePrefrences</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">longMonth</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">showTime</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="na">weekDay</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="na">englishNumbers</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">};</span>

<span class="cm">/*
Generic error logger.
*/</span>
<span class="kd">function</span> <span class="nx">onError</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/*
On startup, check whether we have stored settings.
If we don't, then store the default settings.
*/</span>
<span class="kd">function</span> <span class="nx">checkStoredSettings</span><span class="p">(</span><span class="nx">storedSettings</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">storedSettings</span><span class="p">.</span><span class="nx">datePrefrences</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">browser</span><span class="p">.</span><span class="nx">storage</span><span class="p">.</span><span class="nx">local</span><span class="p">.</span><span class="kd">set</span><span class="p">({</span> <span class="nx">datePrefrences</span> <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kd">function</span> <span class="nx">repaint</span><span class="p">(</span><span class="nx">newSettings</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">browser</span><span class="p">.</span><span class="nx">MahourDate</span><span class="p">.</span><span class="nx">changeSettings</span><span class="p">(</span><span class="nx">newSettings</span><span class="p">);</span>
<span class="p">}</span>

<span class="kd">const</span> <span class="nx">gettingStoredSettings</span> <span class="o">=</span> <span class="nx">browser</span><span class="p">.</span><span class="nx">storage</span><span class="p">.</span><span class="nx">local</span><span class="p">.</span><span class="kd">get</span><span class="p">();</span>
<span class="nx">gettingStoredSettings</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">checkStoredSettings</span><span class="p">,</span> <span class="nx">onError</span><span class="p">);</span>

<span class="cm">/* globals browser */</span>
<span class="kd">var</span> <span class="nx">init</span> <span class="o">=</span> <span class="k">async</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">browser</span><span class="p">.</span><span class="nx">MahourDate</span><span class="p">.</span><span class="nx">addWindowListener</span><span class="p">(</span><span class="dl">"</span><span class="s2">hich</span><span class="dl">"</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">init</span><span class="p">();</span></code></pre></figure> </div> <p>Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² â€ª<code class="language-plaintext highlighter-rouge">browser.storage.local.get()</code>â€¬ Ùˆ â€ª<code class="language-plaintext highlighter-rouge">browser.storage.local.set()</code>â€¬ Ø¯Ø± ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">manifest.jason</code> Ù…Ø¬ÙˆØ² <code class="language-plaintext highlighter-rouge">storage</code> Ú¯Ø±ÙØªÙ‡ Ø´Ø¯Ù‡ Ø§Ø³Øª. <code class="language-plaintext highlighter-rouge">MahourDate</code> Ø´Ù†Ø§Ø³Ù‡ <code class="language-plaintext highlighter-rouge">API</code> ØªØ§Ø²Ù‡ Ø§ÛŒÙ† Ø§ÙØ²ÙˆÙ†Ù‡ Ø§Ø³Øª. Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² <code class="language-plaintext highlighter-rouge">browser.MahourDate.changeSettings(newSettings)</code> ÛŒÚ©ÛŒ Ø§Ø² ØªÙˆØ§Ø¨Ø¹ Ø¢Ù† Ø¨Ø±Ø§ÛŒ Ø§Ø¹Ù…Ø§Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ù…ÛŒâ€ŒØ´ÙˆØ¯.</p> <h1 id="Ù…Ù†Ø§Ø¨Ø¹-Ù…ÙÛŒØ¯"> <a href="#Ù…Ù†Ø§Ø¨Ø¹-Ù…ÙÛŒØ¯" class="anchor-head"></a> Ù…Ù†Ø§Ø¨Ø¹ Ù…ÙÛŒØ¯: </h1> <p>Ø§Ú¯Ø± Ø¨Ø§ Ø³Ø§Ø®Øª Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÙ‡Ø§ Ø¢Ø´Ù†Ø§ÛŒÛŒ Ù†Ø¯Ø§Ø±ÛŒØ¯ Ùˆ ØªØ§Ø²Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒØ¯ Ø§ÛŒÙ† ÙˆÛŒØ¯ÛŒÙˆÛŒ Ø¢Ù‚Ø§ÛŒ Ø´Ø¬Ø§Ø¹ÛŒ Ø±Ø§ Ø¨Ø¨ÛŒÙ†ÛŒØ¯:</p> <iframe width="560" height="315" sandbox="allow-same-origin allow-scripts allow-popups" src="https://peertube.linuxrocks.online/videos/embed/d70182ca-9ea9-4411-bd24-86dcbff95ceb" frameborder="0" allowfullscreen=""></iframe> <p>Ø¨Ø±Ø§ÛŒ ØªØ³Øª Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÙ‡Ø§ Ø±ÙˆÛŒ Thunderbird Ø¯Ø± ØµÙØ­Ù‡ <code class="language-plaintext highlighter-rouge">Add-ons Manager</code> Ø±ÙˆÛŒ <code class="language-plaintext highlighter-rouge">Tools for all add-ons</code> (<i class="fa fa-cog"></i> <i class="fa fa-chevron-down"></i>) Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯. Ø¨Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú¯Ø²ÛŒÙ†Ù‡ <code class="language-plaintext highlighter-rouge">Debug Add-ons</code> ÛŒÚ© ØªØ¨ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯ Ú©Ù‡ Ø¯Ø± Ø¢Ù† Ø§ÙØ²ÙˆÙ†Ù‡ Ù‡Ø§ Ø±Ø§ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ù…ÙˆÙ‚ØªØ§ Ù†ØµØ¨ Ùˆ Ø§Ù…ØªØ­Ø§Ù† Ú©Ù†ÛŒØ¯. Ú©Ø§ÙÛŒ Ø§Ø³Øª Ø±ÙˆÛŒ <code class="language-plaintext highlighter-rouge">Load Temporary Add-on</code> Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯ Ùˆ ÙØ§ÛŒÙ„ <code class="language-plaintext highlighter-rouge">manifest.json</code> Ø§ÙØ²ÙˆÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯.</p> <ul> <li><a href="https://firefox-source-docs.mozilla.org/toolkit/components/extensions/webextensions/index.html">Ø±Ø§Ù‡Ù†Ù…Ø§ÛŒ ØªÙˆØ³Ø¹Ù‡ Ø±Ø§Ø¨Ø· Ø¨Ø±Ù†Ø§Ù…Ù‡ Ù†ÙˆÛŒØ³ÛŒ Ø¨Ø±Ø§ÛŒ Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÙ‡Ø§</a></li> <li><a href="https://developer.mozilla.org/en-US/docs/Mozilla/Add-ons/WebExtensions">Ø§ÙØ²ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø±ÙˆØ±Ú¯Ø±</a></li> <li><a href="https://github.com/mdn/webextensions-examples">Ù†Ù…ÙˆÙ†Ù‡â€ŒÙ‡Ø§ÛŒ Ø³Ø§Ø¯Ù‡</a></li> </ul> </div> </article> <div class="page-content"> <h2>Ø¯ÛŒØ¯Ú¯Ø§Ù‡â€ŒÙ‡Ø§</h2> <p>Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø¯ÛŒØ¯Ú¯Ø§Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ÛŒÙ† Ù¾Ø³Øª Ø±Ø§ Ø¯Ø± Ù…Ø§Ø³ØªÙˆØ¯ÙˆÙ† Ùˆ<a class="link" href="https://mas.to/@mz/105148912382290635"> Ø§ÛŒÙ†Ø¬Ø§ </a>Ø¨Ø¨ÛŒÙ†ÛŒØ¯. Ø¨Ø±Ø§ÛŒ Ù†ÙˆØ´ØªÙ† Ø¯ÛŒØ¯Ú¯Ø§Ù‡ Ø®ÙˆØ¯ Ø±ÙˆÛŒ Ù„ÛŒÙ†Ú© Ø²ÛŒØ± Ú©Ù„ÛŒÚ© Ú©Ù†ÛŒØ¯.</p> <p><a class="button" href="https://mas.to/interact/105148912382290635?type=reply">Ù†ÙˆØ´ØªÙ† Ø¯ÛŒØ¯Ú¯Ø§Ù‡â€Œ</a></p> <p id="mastodon-comments-list"><button id="load-comment">Ø¯ÛŒØ¯Ù† Ø¯ÛŒØ¯Ú¯Ø§Ù‡â€ŒÙ‡Ø§</button></p> <noscript><p>Ø¨Ø±Ø§ÛŒ Ø§ÛŒÙ† Ø¨Ø®Ø´ Ù…ÛŒâ€ŒØ¨Ø§ÛŒØ¯ Ø¬Ø§ÙˆØ§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø±Ø§ ÙØ¹Ø§Ù„ Ú©Ù†ÛŒØ¯.</p></noscript> <script src="/assets/js/purify.min.js"></script> <script type="text/javascript"> function escapeHtml(unsafe) { return unsafe .replace(/&/g, "&amp;") .replace(/</g, "&lt;") .replace(/>/g, "&gt;") .replace(/"/g, "&quot;") .replace(/'/g, "&#039;"); } document.getElementById("load-comment").addEventListener("click", function() { document.getElementById("load-comment").innerHTML = "Ø¯Ø±ÛŒØ§ÙØª Ø¯ÛŒØ¯Ú¯Ø§Ù‡â€ŒÙ‡Ø§"; fetch('https://mas.to/api/v1/statuses/105148912382290635/context') .then(function(response) { return response.json(); }) .then(function(data) { if(data['descendants'] && Array.isArray(data['descendants']) && data['descendants'].length > 0) { document.getElementById('mastodon-comments-list').innerHTML = ""; data['descendants'].forEach(function(reply) { reply.account.display_name = escapeHtml(reply.account.display_name); reply.account.emojis.forEach(emoji => { reply.account.display_name = reply.account.display_name.replace(`:${emoji.shortcode}:`, `<img src="${escapeHtml(emoji.static_url)}" alt="Emoji ${emoji.shortcode}" height="20" width="20" />`); }); mastodonComment = `<div class="mastodon-comment"> <div class="avatar"> <img src="${escapeHtml(reply.account.avatar_static)}" height=60 width=60 alt=""> </div> <div class="content"> <div class="author"> <a href="${reply.account.url}" rel="nofollow"> <span>${reply.account.display_name}</span> <span class="disabled">${escapeHtml(reply.account.acct)}</span> </a> <a class="date" href="${reply.uri}" rel="nofollow"> ${reply.created_at.substr(0, 10)} </a> </div> <div class="mastodon-comment-content">${reply.content}</div> </div> </div>`; document.getElementById('mastodon-comments-list').appendChild(DOMPurify.sanitize(mastodonComment, {'RETURN_DOM_FRAGMENT': true})); }); } else { document.getElementById('mastodon-comments-list').innerHTML = "<p>Ø¨Ø¯ÙˆÙ† Ø¯ÛŒØ¯Ú¯Ø§Ù‡</p>"; } }); }); </script> </div> </main> <nav class="post-nav"> <a class="post-nav-item post-nav-prev" href="/mahour/" > <div class="nav-arrow">Ú©Ù‡Ù†Ù‡â€ŒØªØ±</div> <span class="post-title">Ù…Ø§Ù‡ÙˆØ±ØŒ Ø§ÙØ²ÙˆÙ†Ù‡ ØªØ§Ø±ÛŒØ® Ø®ÙˆØ±Ø´ÛŒØ¯ÛŒ Ø¨Ø±Ø§ÛŒ Thunderbird</span> </a> <a class="post-nav-item post-nav-next" href="/sox/"> <div class="nav-arrow">Ù†ÙˆØªØ±</div> <span class="post-title">Ú©Ø§Ù‡Ø´ Ù†ÙˆÛŒØ² Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² sox</span> </a> </nav> <footer class="footer"> <!-- <a class="footer_item" href="/thanks">Ø³Ù¾Ø§Ø³</a> --> <a class="footer item" href="https://github.com/mhdzli"> <i class="fab fa-github"></i> Ú¯ÛŒØªâ€ŒÙ‡Ø§Ø¨ </a> <a class="footer item" href="https://fosstodon.org/@mzeinali"> <i class="fab fa-linux"></i> mastodon </a> <a class="footer item" href="https://mas.to/@mz"> <i class="fa fa-hand-peace"></i> Ù…Ø³ØªØ§Ø¯ÙˆÙ† </a> <a class="footer item" href="https://lbry.tv/@mzeinali:c"> <i class="fa fa-video"></i> Ù„Ø§ÛŒØ¨Ø±Ø±ÛŒ </a> <a class="footer item" href="https://pixelfed.de/mzeinali"> <i class="fa fa-camera"></i> Ù¾ÛŒÚ©Ø³Ù„ÙØ¯ </a> <a class="footer item" href="/feed.xml"> <i class="fa fa-rss"></i> Ø®ÙˆØ±Ø§Ú© </a> <a class="footer item" href="mailto:m@zmim.ir"> <i class="fa fa-envelope-open"></i> ØªÙ…Ø§Ø³ </a> <!-- <a class="footer_item" href="javascript::void(0)">Ø±Ø²ÙˆÙ…Ù‡</a> <span class="footer_item">&copy; 2021</span> --> <small class="footer_copyright"> <small id="license"> <i class="fab fa-creative-commons"></i> Ù…Ø·Ø§Ù„Ø¨ Ø§ÛŒÙ† ÙˆØ¨Ù„Ø§Ú¯ ØªØ­Øª Ù…Ø¬ÙˆØ² <a rel="license" href="http://creativecommons.org/licenses/by/4.0/deed.fa"> Ú©Ø±ÛŒØªÛŒÙˆ Ú©Ø§Ù…Ù†Ø² Ø§ØªØ±ÛŒØ¨ÛŒÙˆØ´Ù† Û´.Û° Ø§ÛŒÙ†ØªØ±Ù†Ø´Ù†Ø§Ù„ </a>Ù‚Ø±Ø§Ø± Ø¯Ø§Ø±Ø¯. </small> <!-- simorq Theme: https://github.com/mhdzli/simorq ØªÙ… <a href="https://github.com/mhdzli/simorq" target="_blank" rel="noreferrer noopener" > Ø³ÛŒÙ…Ø±Øº </a> Ù†ÛŒØ±Ùˆ Ú¯Ø±ÙØªÙ‡ Ø§Ø² <a href="https://jekyllrb.com" target="_blank" rel="noreferrer noopener"> jekyll </a> --> </small> </footer> <script src="/assets/js/jquery-3.3.1.min.js"></script> <script src="/assets/js/persianumber.js"></script> <script> $(document).ready(function(){ $('.post-item-date').persiaNumber(); $('.archive-date').persiaNumber(); $('.recent-date').persiaNumber(); $('.post-updated-at').persiaNumber(); $('.date-modify').persiaNumber(); $('.header-date').persiaNumber(); }); </script> <script src="/assets/js/main.js" defer="defer"></script> </div> </body> </html>
